<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contacts App</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    body {
      font-family: "Poppins", system-ui, sans-serif;
      min-height: 100vh;
      color: #222;
      background: linear-gradient(135deg, #fffaf0, #f0f8ff);
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      font-size: 1.2rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #0d6efd;
    }

    .btn-back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
      background: linear-gradient(135deg, #0d6efd, #007bff);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 8px 16px;
      text-decoration: none;
      box-shadow: 0 2px 6px rgba(13, 110, 253, 0.3);
      transition: all 0.3s ease;
    }

    .btn-back:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(13, 110, 253, 0.4);
      color: white;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      width: 100%;
    }

    .search-bar {
      margin-bottom: 20px;
      width: 100%;
      max-width: 500px;
    }

    .contacts-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      width: 100%;
      max-width: 1200px;
    }

    .contact-card {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(8px);
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      transition: transform 0.2s;
      cursor: pointer;
    }

    .contact-card:hover {
      transform: translateY(-5px);
    }

    .contact-card img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 10px;
      border: 3px solid #0d6efd;
    }

    .contact-name {
      font-weight: 600;
      color: #0d6efd;
      font-size: 1rem;
      margin-bottom: 5px;
      text-align: center;
    }

    .contact-email {
      font-size: 0.85rem;
      color: #333;
      margin-bottom: 10px;
      text-align: center;
      word-break: break-word;
    }

    footer {
      text-align: center;
      padding: 10px;
      font-size: 0.85rem;
      color: #6c757d;
    }
  </style>
</head>
<body>
  <header>
    <h1><i class="bi bi-people-fill"></i> Contacts</h1>
    <a href="index.html" class="btn-back"><i class="bi bi-arrow-left"></i> Home</a>
  </header>

  <main>
    <input type="text" id="searchInput" class="form-control search-bar" placeholder="Search contacts by name..." />
    <div class="contacts-container" id="contactsContainer">
      <!-- Contact cards appear here -->
    </div>
  </main>

  <footer>© 2025 — Contacts App</footer>

  <!-- Modal -->
  <div class="modal fade" id="contactModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius:20px;">
        <div class="modal-header">
          <h5 class="modal-title" id="modalName"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <img id="modalImg" src="" alt="" style="width:120px; height:120px; border-radius:50%; margin-bottom:15px; border:3px solid #0d6efd;">
          <p id="modalEmail"></p>
          <p id="modalPhone"></p>
          <p id="modalLocation"></p>
        </div>
        <div class="modal-footer">
          <a id="modalMailBtn" href="#" class="btn btn-primary"><i class="bi bi-envelope-fill"></i> Email</a>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const contactsContainer = document.getElementById('contactsContainer');
    const searchInput = document.getElementById('searchInput');
    const modal = new bootstrap.Modal(document.getElementById('contactModal'));
    const modalName = document.getElementById('modalName');
    const modalImg = document.getElementById('modalImg');
    const modalEmail = document.getElementById('modalEmail');
    const modalPhone = document.getElementById('modalPhone');
    const modalLocation = document.getElementById('modalLocation');
    const modalMailBtn = document.getElementById('modalMailBtn');

    let allContacts = [];

    async function fetchContacts(count = 1000) {
      try {
        contactsContainer.innerHTML = '<p class="text-center">Loading contacts, please wait...</p>';
        const response = await fetch(`https://randomuser.me/api/?results=${count}`);
        const data = await response.json();
        allContacts = data.results;
        renderContacts(allContacts);
      } catch (error) {
        console.error("Error fetching contacts:", error);
        contactsContainer.innerHTML = '<p class="text-center text-danger">Failed to load contacts.</p>';
      }
    }

    function renderContacts(contacts) {
      contactsContainer.innerHTML = '';
      if (contacts.length === 0) {
        contactsContainer.innerHTML = '<p class="text-center">No contacts found.</p>';
        return;
      }

      contacts.forEach(user => {
        const card = document.createElement('div');
        card.className = 'contact-card';
        card.innerHTML = `
          <img src="${user.picture.large}" alt="${user.name.first}">
          <div class="contact-name">${user.name.first} ${user.name.last}</div>
          <div class="contact-email">${user.email}</div>
        `;
        card.addEventListener('click', () => openModal(user));
        contactsContainer.appendChild(card);
      });
    }

    function openModal(user) {
      modalName.textContent = `${user.name.first} ${user.name.last}`;
      modalImg.src = user.picture.large;
      modalEmail.textContent = `Email: ${user.email}`;
      modalPhone.textContent = `Phone: ${user.phone}`;
      modalLocation.textContent = `Location: ${user.location.city}, ${user.location.country}`;
      modalMailBtn.href = `mailto:${user.email}`;
      modal.show();
    }

    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      const filtered = allContacts.filter(user =>
        `${user.name.first} ${user.name.last}`.toLowerCase().includes(query)
      );
      renderContacts(filtered);
    });

    fetchContacts();
  </script>
</body>
</html>
