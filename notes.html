<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Notes â€” iPhone-style (single file)</title>
<style>
  :root{
    --bg: #f4f6f8;
    --sidebar:#ffffff;
    --accent:#007aff; /* iOS blue */
    --muted:#8a8f98;
    --card:#ffffff;
    --shadow: 0 6px 18px rgba(2,6,23,0.06);
    font-family: -apple-system, 'SF Pro Text', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#e9eef6);color:#111}
  .app{max-width:1100px;margin:22px auto;padding:12px;display:grid;grid-template-columns:320px 1fr;gap:18px}

  /* Sidebar */
  .sidebar{background:var(--sidebar);border-radius:14px;padding:12px;box-shadow:var(--shadow);height:calc(100vh - 44px);display:flex;flex-direction:column}
  .brand{display:flex;align-items:center;gap:10px;padding:8px 4px}
  .logo{width:42px;height:42px;border-radius:10px;background:linear-gradient(180deg,#fff,#f1f7ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent);border:1px solid rgba(0,0,0,0.03)}
  .brand h1{margin:0;font-size:18px}

  .toolbar{display:flex;gap:8px;padding:8px 4px}
  .btn{background:transparent;border-radius:10px;padding:8px 10px;border:1px solid rgba(0,0,0,0.06);cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,var(--accent),#2a82ff);color:white;border:0}

  .search{margin:8px 4px;padding:8px;border-radius:12px;background:#f1f4f8;border:1px solid rgba(0,0,0,0.03)}
  .search input{width:100%;border:0;background:transparent;outline:none;font-size:14px}

  .notes-list{margin-top:8px;overflow:auto}
  .note-item{display:flex;gap:10px;align-items:flex-start;padding:12px;border-radius:10px;background:transparent;cursor:pointer}
  .note-item:hover{background:linear-gradient(90deg, rgba(240,246,255,0.6), rgba(255,255,255,0.9))}
  .note-title{font-weight:600;margin-bottom:6px}
  .note-preview{font-size:13px;color:var(--muted);max-height:36px;overflow:hidden}
  .note-meta{font-size:12px;color:var(--muted);margin-top:6px}

  /* Editor */
  .editor{background:transparent}
  .editor-card{background:var(--card);border-radius:14px;padding:16px;box-shadow:var(--shadow);min-height:80vh;display:flex;flex-direction:column}
  .editor-top{display:flex;justify-content:space-between;align-items:center}
  .editor h2{margin:6px 0 2px;font-size:22px}
  .timestamp{font-size:13px;color:var(--muted)}
  .content{margin-top:12px;flex:1;display:flex;flex-direction:column}
  textarea.title{font-size:20px;font-weight:700;border:0;outline:none;background:transparent;resize:none}
  textarea.body{flex:1;border:0;outline:none;background:transparent;margin-top:12px;font-size:16px;line-height:1.6;resize:none}

  .editor-actions{display:flex;gap:8px;margin-top:12px}
  .small{font-size:13px;color:var(--muted)}

  /* empty state */
  .empty{display:flex;align-items:center;justify-content:center;height:60vh;color:var(--muted);flex-direction:column}

  /* responsive */
  @media (max-width:900px){.app{grid-template-columns:1fr}.sidebar{height:auto;order:2}.editor-card{min-height:60vh}}
</style>
</head>
<body>
  <div class="app" role="application">
    <aside class="sidebar" aria-label="Notes list">
      <div class="brand">
        <div class="logo">N</div>
        <div>
          <h1>Notes</h1>
          <div class="small">iPhone-style notes</div>
        </div>
      </div>

      <div class="toolbar">
        <button class="btn primary" id="newBtn">New</button>
        <button class="btn" id="pinViewBtn">Pinned</button>
        <button class="btn" id="clearBtn">Clear All</button>
      </div>

      <div class="search" role="search">
        <input id="search" placeholder="Search â€” title or body" aria-label="search notes" />
      </div>

      <div class="notes-list" id="notesList" aria-live="polite">
        <!-- note items inserted here -->
      </div>
    </aside>

    <main class="editor">
      <div class="editor-card" id="editorCard">
        <div class="editor-top">
          <div class="meta">
            <div class="small" id="noteCount">0 notes</div>
          </div>
          <div>
            <button class="btn" id="saveBtn">Save</button>
            <button class="btn" id="deleteBtn">Delete</button>
          </div>
        </div>

        <div class="content" id="contentArea">
          <div class="empty" id="emptyState">
            <div style="font-size:24px;font-weight:700;margin-bottom:8px">Select or create a note</div>
            <div class="small">Tap "New" to create a note. Notes are saved locally in your browser.</div>
          </div>

          <div id="editorForm" style="display:none;flex-direction:column;height:100%">
            <textarea id="noteTitle" class="title" placeholder="Title" rows="1"></textarea>
            <div class="timestamp" id="noteTime">â€”</div>
            <textarea id="noteBody" class="body" placeholder="Start writing..." rows="10"></textarea>

            <div class="editor-actions">
              <button class="btn" id="pinBtn">Toggle Pin</button>
              <button class="btn" id="exportBtn">Export</button>
              <div style="flex:1"></div>
              <div class="small">Autosave on</div>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

<script>
(function(){
  // Simple iPhone-style notes app
  const LS_KEY = 'iphone_notes_v1';
  let notes = [];
  let selectedId = null;
  let showOnlyPinned = false;

  // DOM
  const notesList = document.getElementById('notesList');
  const newBtn = document.getElementById('newBtn');
  const saveBtn = document.getElementById('saveBtn');
  const deleteBtn = document.getElementById('deleteBtn');
  const pinBtn = document.getElementById('pinBtn');
  const pinViewBtn = document.getElementById('pinViewBtn');
  const clearBtn = document.getElementById('clearBtn');
  const exportBtn = document.getElementById('exportBtn');
  const searchEl = document.getElementById('search');
  const emptyState = document.getElementById('emptyState');
  const editorForm = document.getElementById('editorForm');
  const noteTitle = document.getElementById('noteTitle');
  const noteBody = document.getElementById('noteBody');
  const noteTime = document.getElementById('noteTime');
  const noteCount = document.getElementById('noteCount');

  // util
  function uid(){ return 'n_' + Math.random().toString(36).slice(2,9); }
  function now(){ return new Date().toISOString(); }
  function fmtShort(dt){ const d = new Date(dt); return d.toLocaleString(undefined, {year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'}); }

  function load(){ try{ notes = JSON.parse(localStorage.getItem(LS_KEY) || '[]'); }catch(e){ notes = []; } }
  function save(){ localStorage.setItem(LS_KEY, JSON.stringify(notes)); }

  function createNote(){ const id = uid(); const note = {id, title:'', body:'', pinned:false, createdAt:now(), updatedAt:now()}; notes.unshift(note); selectedId = id; save(); render(); openEditor(note); }

  function deleteNoteById(id){ notes = notes.filter(n=>n.id !== id); if(selectedId === id) { selectedId = notes.length ? notes[0].id : null; }
    save(); render(); if(selectedId) openEditor(notes.find(n=>n.id===selectedId)); else closeEditor(); }

  function updateNoteFromForm(){ if(!selectedId) return; const note = notes.find(n=>n.id===selectedId); if(!note) return; note.title = noteTitle.value; note.body = noteBody.value; note.updatedAt = now(); save(); render(); }

  function togglePin(id){ const note = notes.find(n=>n.id===id); if(!note) return; note.pinned = !note.pinned; note.updatedAt = now(); // reorder: pinned first, then recent
    notes = notes.sort((a,b)=>{ if(a.pinned===b.pinned) return (new Date(b.updatedAt)) - (new Date(a.updatedAt)); return a.pinned? -1:1; }); save(); render(); }

  function openEditor(note){ emptyState.style.display='none'; editorForm.style.display='flex'; noteTitle.focus(); noteTitle.value = note.title; noteBody.value = note.body; noteTime.textContent = `Updated: ${fmtShort(note.updatedAt)}`; noteCount.textContent = `${notes.length} notes`; selectedId = note.id; }
  function closeEditor(){ emptyState.style.display='flex'; editorForm.style.display='none'; selectedId = null; noteCount.textContent = `${notes.length} notes`; }

  function exportNote(id){ const note = notes.find(n=>n.id===id); if(!note) return; const data = `Title: ${note.title}\n\n${note.body}`; const blob = new Blob([data], {type:'text/plain;charset=utf-8'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = (note.title || 'note') + '.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); }

  function render(){
    const q = searchEl.value.trim().toLowerCase();
    notesList.innerHTML = '';
    const filtered = notes.filter(n=>{
      if(showOnlyPinned && !n.pinned) return false;
      if(!q) return true;
      return ((n.title||'').toLowerCase().includes(q) || (n.body||'').toLowerCase().includes(q));
    });

    if(filtered.length === 0){ notesList.innerHTML = '<div style="padding:12px;color:var(--muted)">No notes to show</div>'; }

    filtered.forEach(n=>{
      const el = document.createElement('div'); el.className='note-item'; el.tabIndex=0;
      el.innerHTML = `<div style="flex:1"><div class="note-title">${escapeHtml(n.title || '(No title)')}</div><div class="note-preview">${escapeHtml((n.body||'').slice(0,120))}</div><div class="note-meta">${fmtShort(n.updatedAt)} ${n.pinned? ' â€¢ ðŸ“Œ':''}</div></div>`;
      el.onclick = ()=>{ selectedId = n.id; openEditor(n); };
      const actions = document.createElement('div'); actions.style.marginLeft='8px'; actions.style.display='flex'; actions.style.flexDirection='column'; actions.style.gap='6px';
      const pin = document.createElement('button'); pin.className='btn'; pin.textContent = n.pinned? 'Unpin':'Pin'; pin.onclick = (e)=>{ e.stopPropagation(); togglePin(n.id); };
      const del = document.createElement('button'); del.className='btn'; del.textContent='Delete'; del.onclick = (e)=>{ e.stopPropagation(); if(confirm('Delete this note?')) deleteNoteById(n.id); };
      actions.appendChild(pin); actions.appendChild(del);
      el.appendChild(actions);
      notesList.appendChild(el);
    });

    if(selectedId){ const cur = notes.find(n=>n.id===selectedId); if(cur) openEditor(cur); else closeEditor(); } else { closeEditor(); }
  }

  function escapeHtml(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  // events
  newBtn.addEventListener('click', ()=>createNote());
  saveBtn.addEventListener('click', ()=>{ updateNoteFromForm(); alert('Saved'); });
  deleteBtn.addEventListener('click', ()=>{ if(!selectedId) return; if(confirm('Delete this note?')){ deleteNoteById(selectedId); } });
  pinBtn.addEventListener('click', ()=>{ if(!selectedId) return; togglePin(selectedId); });
  pinViewBtn.addEventListener('click', ()=>{ showOnlyPinned = !showOnlyPinned; pinViewBtn.style.background = showOnlyPinned? 'linear-gradient(180deg,#e6f0ff,#eef6ff)':'transparent'; render(); });
  clearBtn.addEventListener('click', ()=>{ if(confirm('Clear all notes?')){ notes = []; save(); render(); } });
  exportBtn.addEventListener('click', ()=>{ if(!selectedId) return; exportNote(selectedId); });

  searchEl.addEventListener('input', ()=>render());
  noteTitle.addEventListener('input', ()=>{ updateNoteFromForm(); });
  noteBody.addEventListener('input', ()=>{ updateNoteFromForm(); });

  // keyboard shortcuts
  window.addEventListener('keydown', (e)=>{
    if((e.ctrlKey || e.metaKey) && e.key === 'n'){ e.preventDefault(); createNote(); }
    if((e.ctrlKey || e.metaKey) && e.key === 's'){ e.preventDefault(); updateNoteFromForm(); alert('Saved'); }
  });

  // init
  load(); // sort pinned first
  notes = notes.sort((a,b)=>{ if(a.pinned===b.pinned) return (new Date(b.updatedAt)) - (new Date(a.updatedAt)); return a.pinned? -1:1; });
  if(notes.length) selectedId = notes[0].id;
  render();

})();
</script>
</body>
</html>
